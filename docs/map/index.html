<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="shortcut icon" href="https://magamig.github.io/favicon.ico">
    
    <link rel="stylesheet" href="/css/style.min.css">

    <title>Map</title>

    
    <script>if(!sessionStorage.getItem("_swa")&&document.referrer.indexOf(location.protocol+"//"+location.host)!== 0){fetch("https://counter.dev/track?"+new URLSearchParams({referrer:document.referrer,screen:screen.width+"x"+screen.height,user:"magamig",utcoffset:"1"}))};sessionStorage.setItem("_swa","1");</script>

    
    <meta name="google-site-verification" content="oOj7T7YgBib7EQmE1PWwWTP1DmyTTUxA3yTfPPzVf5s" />

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/katex.min.css" integrity="sha384-L+Gq2Cso/Y2x8fX4wausgiZT8z0QPZz7OqPuz4YqAycQJyrJT9NRLpjFBD6zlOia" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/katex.min.js" integrity="sha384-z64WtjpyrKFsxox9eI4SI8eM9toXdoYeWb5Qh+8PO+eG54Bv9BZqf9xNhlcLf/sA" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous" onload="renderMathInElement(document.body, {delimiters: [{left: '$$', right: '$$', display: true},{left: '\\[', right: '\\]', display: true},{left: '$', right: '$', display: false},{left: '\\(', right: '\\)', display: false}]});"></script>
</head>
<body>
        <div class="container"><header id="banner">
    <h2><a href="https://magamig.github.io/">Miguel Magalhães</a></h2>
    <nav>
        <ul>
            <li>
                <a href="/posts/" title="Posts">Posts</a>
            </li><li>
                <a href="/map/" title="Map">Map</a>
            </li><li>
                <a href="/about/" title="About">About</a>
            </li>
        </ul>
    </nav>
</header>
<main id="content">
<article>
    <header id="post-header">
        <h1>Map</h1></header><p>I&rsquo;ve lived in <span id="PRT" class="interactive">Portugal</span>, <span id="HUN" class="interactive">Hungary</span>, <span id="FIN" class="interactive">Finland</span>, and I&rsquo;m currently based in <span id="FRA" class="interactive">France</span>. Below is the map with the countries I&rsquo;ve visited.</p>
<p><i><span id="selectedLabel"> </span></i></p>
<div id="map"></div>
<script src="https://d3js.org/d3.v6.min.js"></script>
<script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
<script>
    const lived = ["PRT","HUN","FIN","FRA"];
    const visited = ["PRT","ESP","LUX","ITA","HUN","MKD","KOS","SVK","POL","BIH",
        "HRV","SVN","SRB","FRA","DEU","AUT","CZE","UKR","MDA","ROU","BGR","ALB",
        "MNE","CHL","GBR","VAT","DNK","SWE","CHE","IND","LKA","FIN","EST"];
    const selectedLabel = document.getElementById("selectedLabel");
    let w = 1000,
        h = 620,
        projection = d3.geoMercator().translate([w/2, h/2]).scale(150).center([0,45]);
        path = d3.geoPath().projection(projection),
        svg = d3.select("#map")
            .append("svg")
            .attr("preserveAspectRatio", "xMinYMin meet")
            .attr("viewBox", "0 0 " + w + " " + h)
            .classed("svg-content", true);
    let mouseOver = function(d) {
        d3.selectAll("path")
            .transition()
            .duration(100)
            .style("opacity", .8)
            .style("stroke", "#999");
        d3.select(d.target)
            .raise()
            .transition()
            .duration(100)
            .style("opacity", 1)
            .style("stroke", "black");
        selectedLabel.innerHTML = ("> " + d.target.__data__.properties.name) ?? "";
    };
    let mouseLeave = function() {
        d3.selectAll("path")
            .transition()
            .duration(100)
            .style("opacity", .8)
            .style("stroke", "#999");
        selectedLabel.innerHTML = "&nbsp;";
    };
    [...document.getElementsByClassName('interactive')].forEach((e) => {
        e.onmouseover = () => mouseOver({target: "path#" + e.id});
        e.onmouseleave = () => mouseLeave()
    });
    d3.json("/other/world.geojson")
        .then((values) => {
            svg.selectAll("path")
                .data(values.features)
                .enter()
                .append("path")
                .style("stroke", "#999")
                .style("opacity", .8)
                .on("mouseover", mouseOver )
                .on("mouseleave", mouseLeave )
                .attr("d", path)
                .attr("id", d => d.id)
                .attr("fill", (d) => 
                    lived.includes(d.id)
                    ? '#00a4a4'
                    : (visited.includes(d.id) 
                        ? '#a40000' 
                        : '#aaaaaa')
                );
        });
</script>
</article>

            </main><footer id="footer">
    
</footer>
<div>
    </body>
</html>
